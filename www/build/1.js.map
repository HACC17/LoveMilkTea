{"version":3,"sources":["../../src/pages/admin/admin.module.ts","../../src/pages/admin/admin.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdminPage } from './admin';\n\n@NgModule({\n  declarations: [\n    AdminPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdminPage),\n  ],\n})\nexport class AdminPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin/admin.module.ts","import {Component} from '@angular/core';\nimport {IonicPage, NavController, NavParams, ToastController} from 'ionic-angular';\nimport {AngularFireAuth} from \"angularfire2/auth\";\nimport {FIREBASE_CONFIG} from \"./../../app.firebase.config\";\nimport * as firebase from 'firebase';\n\n@IonicPage()\n@Component({\n    selector: 'page-admin',\n    templateUrl: 'admin.html',\n})\nexport class AdminPage {\n    userInputRef: any;\n    masterDataRef: any;\n    App: any;\n    db: any;\n    items: string[];\n\n    constructor(private afAuth: AngularFireAuth, private toast: ToastController, public navCtrl: NavController, public navParams: NavParams) {\n        if (!firebase.apps.length) {\n            this.App = firebase.initializeApp(FIREBASE_CONFIG);\n        } else {\n            this.App = firebase;\n        }\n        this.db = this.App.database();\n        this.userInputRef = this.db.ref('/dataPoints/');\n        this.masterDataRef = this.db.ref('/testPoints');\n    }\n\n    ionViewDidLoad() {\n        //added this here instead of constructor, better coding practice to put here?\n        var item = [];\n        this.userInputRef.once('value').then(function (datakey) {\n            datakey.forEach(function (data) {\n                var temp = data.val();\n                Object.assign(temp, {'key': data.key});\n                item.push(temp);\n            });\n        });\n        this.items = item;\n    }\n\n    //value is the key for the entry\n    approve(value) {\n        this.userInputRef.child(value.key).update({'status': 'approved'});\n        this.masterDataRef = this.masterDataRef.push();\n        this.masterDataRef.set({\n            'name': value.pointName,\n            'address': value.address,\n            'lat': value.latitude,\n            'lng': value.longitude,\n            'description': value.description,\n            'number': value.phone,\n            'website': value.website,\n            'type': value.type,\n        });\n        this.navCtrl.setRoot(this.navCtrl.getActive().component);\n    }\n\n    deny(value) {\n        this.userInputRef.child(value.key).update({'status': 'denied'});\n        this.navCtrl.setRoot(this.navCtrl.getActive().component);\n    }\n\n    editData(value) {\n        console.log(value);\n        this.navCtrl.push('EditSubmitDataPage', value);\n    }\n\n    //value is the key for the entry\n    deleteItem(value) {\n        this.userInputRef.child(value.key).remove();\n        //refresh page\n        this.navCtrl.setRoot(this.navCtrl.getActive().component);\n    }\n    filterItems(value){\n        var item = [];\n        this.userInputRef.once('value').then(function (datakey) {\n            datakey.forEach(function (data) {\n                var temp = data.val();\n                if (value === 'showAll'){\n                    item.push(temp);\n                } else if (temp.status === value){\n                    item.push(temp);\n                }\n            });\n        });\n        this.items = item;\n    }\n\n    async logout() {\n        const result = await this.afAuth.auth.signOut();\n        this.navCtrl.setRoot('HomePage');\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin/admin.ts"],"sourceRoot":""}